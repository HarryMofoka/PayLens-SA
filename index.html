<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PayLens SA - Salary Transparency</title>
  <meta name="description" content="South African estimated salary ranges for various job roles.">
  <link rel="stylesheet" href="/style.css" />
</head>

<body>
  <div id="app">
    <header class="app-header">
      <div class="header-content">
        <div>
          <h1>PayLens SA</h1>
          <p class="subtitle">Salary Clarity for South Africans</p>
        </div>
        <div class="auth-controls">
          <button id="auth-btn" class="btn-secondary">Sign In</button>
          <button id="profile-btn" class="btn-icon hidden" title="My Dashboard">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </button>
          <button id="premium-btn" class="btn-premium small">Pro üëë</button>
          <button id="contribute-btn" class="btn-primary small">Contribute</button>
        </div>
      </div>
    </header>

    <main class="main-content">
      <!-- Components will be injected here or structured here -->
      <section class="controls" id="controls">
        <!-- Main Search -->
        <div class="control-group">
          <label for="search-input">Search for a role</label>
          <input type="text" id="search-input" placeholder="e.g. Engineer, Manager...">
        </div>

        <div class="filters-row">
          <!-- Industry Selector -->
          <div class="control-group">
            <label for="industry-select">Industry</label>
            <select id="industry-select">
              <option value="" disabled selected>Select Industry...</option>
              <!-- Populated via JS -->
            </select>
          </div>
          <!-- Qualification Filter -->
          <div class="control-group">
            <label for="qualification-select">Min. Qualification</label>
            <select id="qualification-select">
              <option value="any">All Qualifications</option>
              <!-- Populated via JS -->
            </select>
          </div>
        </div>

        <!-- Job Selector -->
        <div class="control-group">
          <label for="role-select">Select Role</label>
          <select id="role-select" disabled>
            <option value="" disabled selected>First select an industry...</option>
            <!-- Options populated via JS -->
          </select>
        </div>

        <!-- Region Selector -->
        <div class="control-group">
          <label for="region-select">Region</label>
          <select id="region-select">
            <!-- Populated via JS -->
          </select>
        </div>

        <!-- Experience Level -->
        <div class="control-group">
          <label>Experience Level</label>
          <div class="toggle-container">
            <div class="toggle-group" id="level-toggle">
              <!-- Buttons populated via JS to match data keys -->
            </div>
          </div>
        </div>
      </section>

      <section class="results" id="results">
        <div class="card result-card">
          <div class="card-header">
            <h2>Estimated Salary Range</h2>
            <button id="save-role-btn" class="btn-icon-small" title="Save this search">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path
                  d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                </path>
              </svg>
            </button>
          </div>

          <!-- Demand Indicator -->
          <div class="demand-indicator hidden" id="demand-indicator">
            <div class="demand-badge" id="demand-badge">
              <span id="demand-icon">üî•</span>
              <span id="demand-text">High Demand</span>
            </div>
            <div class="demand-trend" id="demand-trend">Trending Up</div>
          </div>

          <!-- Top Employers Panel (New Phase 3.2) -->
          <div class="top-employers hidden" id="top-employers">
            <h3>Top Paying Companies</h3>
            <div id="employers-list" class="employers-list">
              <!-- JS populated -->
            </div>
          </div>

          <div class="salary-display">
            <span class="currency">R</span>
            <span class="amount" id="salary-amount">---</span>
            <span class="period">/ year</span>
          </div>
          <div class="salary-monthly">
            <span id="salary-monthly-amount">---</span> / month
          </div>

          <!-- Purchasing Power Card (Phase 3.3) -->
          <div class="col-card hidden" id="col-card">
            <div class="col-header">
              <span class="col-icon">‚öñÔ∏è</span> Buying Power Index
            </div>
            <div class="col-body">
              <div class="col-metric">
                <span class="col-label">Real Value:</span>
                <span class="col-value" id="col-real-value">---</span>
              </div>
              <div class="col-metric">
                <span class="col-label">Cost Index:</span>
                <span class="col-value" id="col-index-val">---</span>
              </div>
              <div class="col-insight" id="col-insight">
                Higher cost of living reduces effective salary.
              </div>
            </div>
          </div>

          <!-- Salary Chart -->
          <div class="chart-container" id="salary-chart">
            <!-- Bars injected via JS -->
          </div>

          <div class="card-footer">
            <button id="personalize-btn" class="btn-outline full-width">Get Personalized Estimate</button>
          </div>
        </div>

        <!-- Career Path Projection -->
        <div class="card result-card" id="career-card" style="margin-top: 2rem; display: none;">
          <div class="card-header">
            <h2>Career Trajectory</h2>
          </div>

          <div class="career-projection">
            <p class="career-intro">Project your growth over the next decade.</p>

            <div class="slider-container">
              <input type="range" min="0" max="10" value="0" class="slider" id="career-slider">
              <div class="slider-labels">
                <span>Now</span>
                <span>+5 Years</span>
                <span>+10 Years</span>
              </div>
            </div>

            <div class="timeline-viz">
              <!-- Steps injected via JS -->
              <div class="timeline-line"></div>
              <div class="timeline-progress" id="timeline-progress"></div>
              <div class="timeline-steps" id="timeline-steps">
                <!-- JS -->
              </div>
            </div>

            <div class="projection-result" id="projection-result">
              <div class="proj-role" id="proj-role">Current Role</div>
              <div class="proj-salary" id="proj-salary">---</div>
              <p class="proj-desc" id="proj-desc">Move the slider to see your future.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Market Pulse Section -->
      <section class="market-pulse" id="market-pulse">
        <h2>Market Pulse <span>Live</span></h2>
        <div class="market-grid">
          <div class="market-card">
            <h3>Top Demand Roles</h3>
            <div id="top-demand-list" class="market-list">
              <!-- Populated JS -->
            </div>
          </div>

          <div class="market-card skills-card">
            <h3>Trending Skills</h3>
            <div id="trending-skills-list" class="skills-cloud">
              <!-- Populated JS (Contextual to selected role or general) -->
              <p class="empty-state">Select a role to see skills.</p>
            </div>
            <button id="analyze-skills-btn" class="btn-text hidden"
              style="margin-top: 1rem; width: 100%; text-align: center;">Analyze My CV</button>
          </div>

          <!-- Featured Jobs (Phase 5.3) -->
          <div class="market-card" id="jobs-card">
            <h3>Featured Opportunities</h3>
            <div id="jobs-list" class="jobs-list">
              <p class="empty-state">No active listings.</p>
            </div>
          </div>

          <!-- Poll Card (Phase 4.2) -->
          <div class="poll-card" id="poll-card">
            <h3>Community Poll</h3>
            <div class="poll-question" id="poll-question">Loading poll...</div>

            <!-- Voting View -->
            <div class="poll-options" id="poll-options">
              <!-- JS populated -->
            </div>

            <!-- Results View -->
            <div class="poll-results hidden" id="poll-results">
              <!-- JS populated -->
            </div>
          </div>
        </div>
      </section>

      <!-- Forum Section (Phase 4.3) -->
      <section class="forum-section" id="forum-section">
        <div class="section-header">
          <h2>Anonymous Q&A</h2>
          <button class="action-btn" id="ask-btn">Ask a Question</button>
        </div>

        <div id="forum-feed" class="forum-feed">
          <!-- JS populated -->
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <p>&copy; 2025 PayLens SA. Data is for estimation only.</p>
      <div class="footer-links">
        <a href="#" id="employer-link">For Employers</a>
      </div>
    </footer>
  </div>

  <!-- Recruiter Portal Modal -->
  <div id="recruiter-modal" class="modal hidden">
    <div class="modal-content large">
      <span class="close-modal" data-target="recruiter-modal">&times;</span>

      <div class="recruiter-header">
        <h2>Recruiter Portal üíº</h2>
        <div class="recruiter-tabs">
          <button class="tab-btn active" data-tab="benchmark">Benchmark Offer</button>
          <button class="tab-btn" data-tab="post-job">Post a Job</button>
          <button class="tab-btn" data-tab="api">Developer API</button>
        </div>
      </div>

      <!-- Tab: Benchmark -->
      <div id="tab-benchmark" class="tab-content">
        <div class="benchmark-tool">
          <h3>Is your offer competitive?</h3>
          <form id="benchmark-form">
            <div class="form-row">
              <select id="bench-role" required>
                <option>Select Role...</option>
              </select>
              <select id="bench-region" required>
                <option>Select Region...</option>
              </select>
            </div>
            <div class="form-group">
              <label>Offer Amount (Annual CTC)</label>
              <input type="number" id="bench-offer" placeholder="e.g. 650000" required>
            </div>
            <button type="submit" class="btn-primary">Analyze Offer</button>
          </form>

          <div id="bench-result" class="bench-result hidden">
            <div class="bench-score" id="bench-score-text">Top 10%</div>
            <p id="bench-desc">This offer is highly competitive for Gauteng.</p>
          </div>
        </div>
      </div>

      <!-- Tab: Post Job -->
      <div id="tab-post-job" class="tab-content hidden">
        <h3>Create a Listing</h3>
        <form id="job-form">
          <div class="form-group">
            <label>Job Title</label>
            <input type="text" id="job-title" placeholder="e.g. Senior Backend Engineer" required>
          </div>
          <div class="form-group">
            <label>Company Name</label>
            <input type="text" id="job-company" placeholder="e.g. Fintech Co." required>
          </div>
          <div class="form-row">
            <input type="number" id="job-min" placeholder="Min Salary" required>
            <input type="number" id="job-max" placeholder="Max Salary" required>
          </div>
          <button type="submit" class="btn-primary">Post Listing (mock)</button>
        </form>
      </div>

      <!-- Tab: API -->
      <div id="tab-api" class="tab-content hidden">
        <h3>Salary Data API</h3>
        <p>Access our market data programmatically.</p>
        <div class="api-box">
          <code id="api-key-display">Click generate to get key...</code>
          <button id="generate-api-btn" class="btn-secondary small">Generate Key</button>
        </div>
        <div class="api-docs">
          <p>GET /api/v1/salary?role=software-engineer&region=gt</p>
        </div>
      </div>

    </div>
  </div>
  <!-- Submission Modal -->
  <div id="submission-modal" class="modal hidden">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h2>Contribute Data</h2>
      <p>Help us improve accuracy. Submissions are anonymous.</p>

      <form id="salary-form">
        <div class="form-group">
          <label for="submit-role">Job Title</label>
          <input type="text" id="submit-role" placeholder="e.g. Senior Java Dev" required>
        </div>

        <div class="form-group">
          <label for="submit-industry">Industry</label>
          <select id="submit-industry" required>
            <!-- Populated via JS -->
          </select>
        </div>

        <div class="form-group">
          <label for="submit-salary">Annual CTC (ZAR)</label>
          <input type="number" id="submit-salary" placeholder="e.g. 750000" min="50000" required>
        </div>

        <button type="submit" class="btn-primary full-width">Submit Anonymously</button>
      </form>
    </div>
  </div>
  </div>
  <!-- CV Analyzer Modal (Phase 5.2) -->
  <div id="cv-modal" class="modal hidden">
    <div class="modal-content">
      <span class="close-modal" data-target="cv-modal">&times;</span>
      <h2>Skill Gap Analyzer</h2>
      <p>Paste your CV text to identify missing high-value skills for this role.</p>

      <div class="form-group">
        <textarea id="cv-text" rows="8" placeholder="Paste your CV content here..." class="cv-input"></textarea>
      </div>

      <button id="analyze-cv-btn" class="btn-primary full-width">Analyze Skills</button>

      <div id="cv-results" class="cv-results hidden">
        <div class="cv-score-container">
          <div class="cv-score-circle">
            <span id="cv-match-score">0%</span>
          </div>
          <div class="cv-score-label">Match Score</div>
        </div>

        <div class="cv-lists">
          <div class="cv-list-group">
            <h4>‚úÖ You Have</h4>
            <ul id="cv-found-list" class="skill-list-check"></ul>
          </div>
          <div class="cv-list-group">
            <h4>üöÄ To Learn</h4>
            <ul id="cv-missing-list" class="skill-list-missing"></ul>
          </div>
        </div>

        <div class="cv-recommendation">
          <p>üí° Learning these Top 3 missing skills could boost your potential by <strong>~15-20%</strong>.</p>
        </div>
      </div>
    </div>
  </div>
  <!-- Dashboard Modal -->
  <div id="dashboard-modal" class="modal hidden">
    <div class="modal-content large">
      <span class="close-modal" data-target="dashboard-modal">&times;</span>
      <h2>My Dashboard</h2>

      <div class="dashboard-section">
        <h3>Saved Profiles</h3>
        <div id="saved-roles-list" class="list-container">
          <!-- Populated via JS -->
          <p class="empty-state">No saved roles yet.</p>
        </div>
      </div>

      <div class="dashboard-section">
        <h3>My Contributions</h3>
        <div id="contributions-list" class="list-container">
          <!-- Populated via JS -->
        </div>
      </div>

      <button id="logout-btn" class="btn-text">Sign Out</button>
    </div>
  </div>

  <!-- Calculator Modal -->
  <div id="calc-modal" class="modal hidden">
    <div class="modal-content">
      <span class="close-modal" data-target="calc-modal">&times;</span>
      <h2>Personalized Estimate</h2>
      <p>Refine the range based on your profile.</p>

      <form id="calc-form">
        <div class="form-group">
          <label for="calc-exp">Years of Experience</label>
          <input type="number" id="calc-exp" min="0" max="40" placeholder="e.g. 5" required>
        </div>

        <div class="form-group">
          <label for="calc-certs">Relevant Certifications</label>
          <input type="number" id="calc-certs" min="0" max="10" placeholder="e.g. 2" required>
        </div>

        <div class="form-group row-check">
          <input type="checkbox" id="calc-skills">
          <label for="calc-skills">I have high-demand skills (AI, Cloud, Etc.)</label>
        </div>

        <button type="submit" class="btn-primary full-width">Calculate</button>
      </form>

      <div id="calc-result" class="calc-result hidden">
        <div class="calc-divider"></div>
        <h3>Your Estimate</h3>
        <div class="calc-amount" id="calc-amount-display">R 0</div>

        <div class="comparison-bar-container">
          <span class="comp-label min" id="comp-min">Min</span>
          <div class="comp-track">
            <div class="comp-marker" id="comp-marker"></div>
          </div>
          <span class="comp-label max" id="comp-max">Max</span>
        </div>
        <p class="comp-text" id="comp-text">You are in the top 10% of this bracket.</p>
      </div>
    </div>
  </div>
  <!-- Ask Question Modal -->
  <div id="ask-modal" class="modal hidden">
    <div class="modal-content">
      <span class="close-modal" data-target="ask-modal">&times;</span>
      <h2>Ask the Community</h2>
      <form id="ask-form">
        <div class="form-group">
          <label>Your Question (Anonymous)</label>
          <textarea id="ask-input" rows="3" placeholder="e.g. Salary for Senior Dev at Vodacom?" required></textarea>
        </div>
        <button type="submit" class="btn-primary full-width">Post Question</button>
      </form>
    </div>
  </div>

  </div>
  </div>

  <!-- Premium Analytics Modal -->
  <div id="premium-modal" class="modal hidden">
    <div class="modal-content large">
      <span class="close-modal" data-target="premium-modal">&times;</span>

      <!-- Locked State -->
      <div id="premium-locked" class="premium-locked-view text-center">
        <h2>Unlock Professional Insights üëë</h2>
        <p class="premium-pitch">Get the complete picture with PayLens Pro.</p>

        <div class="premium-features-list">
          <div class="feature-item">üìä <strong>Province-by-Province Comparison</strong><br>See exactly where your role
            pays the most across South Africa.</div>
          <div class="feature-item">üìà <strong>Advanced Forecasting</strong><br>Detailed 10-year salary projection
            table.</div>
          <div class="feature-item">üíæ <strong>Data Export</strong><br>Download raw salary data for your records.</div>
        </div>

        <button id="unlock-btn" class="btn-premium">Upgrade for R49/mo</button>
      </div>

      <!-- Unlocked State -->
      <div id="premium-unlocked" class="premium-unlocked-view hidden">
        <div class="premium-header">
          <h2>Career Analytics Dashboard</h2>
          <div class="export-actions">
            <button id="export-csv-btn" class="btn-secondary small">Download CSV</button>
          </div>
        </div>

        <div class="dashboard-grid">
          <!-- Regional Chart -->
          <div class="dashboard-card full-width">
            <h3>Regional Salary Heatmap</h3>
            <p class="card-subtitle">Comparing <span id="premium-role-name">Role</span> across all provinces</p>
            <div id="regional-chart" class="chart-container large"></div>
          </div>

          <!-- Forecast Table -->
          <div class="dashboard-card full-width">
            <h3>10-Year Forecast</h3>
            <div class="table-responsive">
              <table class="forecast-table" id="forecast-table">
                <thead>
                  <tr>
                    <th>Year</th>
                    <th>Experience Level</th>
                    <th>Projected Annual CTC</th>
                    <th>Growth %</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- JS Populated -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="/main.js"></script>
</body>

</html>